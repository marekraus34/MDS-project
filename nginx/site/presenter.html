<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <title>MDS – Presenter</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap 5 -->
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        rel="stylesheet"
    >

    <style>
        body {
            background-color: #0b1120;
            color: #e5e7eb;
        }
        .navbar {
            background: linear-gradient(90deg, #111827, #1f2937);
        }
        .card {
            background-color: #020617;
            border-color: #1f2937;
            border-radius: 1rem;
        }
        .form-control, .form-select {
            background-color: #020617;
            border-color: #374151;
            color: #e5e7eb;
        }
        .form-control:focus, .form-select:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 0.25rem rgba(59,130,246,0.25);
        }
        .btn-primary {
            background: linear-gradient(135deg, #2563eb, #4f46e5);
            border: none;
        }
        .btn-outline-light {
            border-color: #6b7280;
        }
        video {
            background-color: #020617;
        }
        .small-label {
            font-size: 0.85rem;
            color: #9ca3af;
        }
        #presenterNameDisplay {
            font-weight: 600;
        }
    </style>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark mb-4">
    <div class="container-fluid">
        <a class="navbar-brand" href="index.html">
            MDS Projekt – Presenter
        </a>
    </div>
</nav>

<div class="container-fluid">
    <div class="row g-4">
        <!-- LEVÝ SLOUPEC – nastavení a náhled -->
        <div class="col-lg-8">
            <div class="card mb-3">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <span>Nastavení vysílání</span>
                    <span class="badge bg-secondary small-label">
                        MediaStream API – náhled + mute
                    </span>
                </div>
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-4">
                            <label for="presenterName" class="form-label">
                                Jméno publikujícího
                            </label>
                            <input type="text" class="form-control" id="presenterName"
                                   placeholder="Např. Martin">
                            <div class="form-text small-label">
                                Jméno se použije pro identifikaci přednášejícího.
                            </div>
                        </div>

                        <div class="col-md-4">
                            <label for="cameraSelect" class="form-label">
                                Kamera
                            </label>
                            <select id="cameraSelect" class="form-select">
                                <option value="">Výchozí</option>
                            </select>
                            <div class="form-text small-label">
                                Seznam se načte z&nbsp;MediaDevices (enumerateDevices).
                            </div>
                        </div>

                        <div class="col-md-4">
                            <label for="micSelect" class="form-label">
                                Mikrofon
                            </label>
                            <select id="micSelect" class="form-select">
                                <option value="">Výchozí</option>
                            </select>
                            <div class="form-text small-label">
                                Lze změnit i po spuštění náhledu (přes restart náhledu).
                            </div>
                        </div>
                    </div>

                    <hr class="border-secondary my-3">

                    <div class="d-flex flex-wrap gap-2">
                        <button id="btnStartPreview" class="btn btn-primary">
                            Spustit náhled
                        </button>
                        <button id="btnStopPreview" class="btn btn-outline-light" disabled>
                            Zastavit náhled
                        </button>
                        <button id="btnMute" class="btn btn-outline-warning" disabled>
                            Ztlumit mikrofon
                        </button>
                        <span id="presenterStatus" class="ms-auto small-label">
                            Připraveno. Načítám zařízení…
                        </span>
                    </div>
                </div>
            </div>

            <!-- Video náhled -->
            <div class="card">
                <div class="card-header">
                    Náhled videa
                </div>
                <div class="card-body">
                    <p class="small-label mb-2">
                        Před zahájením vysílání si můžeš zkontrolovat obraz a zvuk.
                    </p>
                    <video id="localVideo"
                           class="w-100 rounded"
                           playsinline
                           autoplay
                           muted></video>
                </div>
            </div>
        </div>

        <!-- PRAVÝ SLOUPEC – info / budoucí statistiky -->
        <div class="col-lg-4">
            <div class="card mb-3">
                <div class="card-header">
                    Informace o roli
                </div>
                <div class="card-body">
                    <p class="small-label mb-1">
                        Toto je stránka pro <strong>publikujícího</strong> (presenter).
                    </p>
                    <ul class="small-label mb-0">
                        <li>Přístup ke kameře a mikrofonu přes <code>MediaStream API</code>.</li>
                        <li>Možnost zadat jméno před zahájením vysílání.</li>
                        <li>Ztlumení mikrofonu během publikování (toggle <code>track.enabled</code>).</li>
                        <li>Později sem přidáme WebRTC napojení na server.</li>
                    </ul>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    Přednášející
                </div>
                <div class="card-body">
                    <div class="small-label">
                        Zatím žádný seznam – v další fázi sem přidáme info o tom,
                        na jakou „camX“ kameru je tento presenter napojen.
                    </div>
                    <div class="mt-2">
                        <span class="small-label">Aktivní přednášející:</span>
                        <span id="presenterNameDisplay" class="ms-1">–</span>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- Tvůj JS -->
<script src="./presenter.js"></script>
</body>
</html>
